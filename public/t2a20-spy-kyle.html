<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Encrypt and Decrypt</title>
</head>
<body>

<h1 align="center">t2a20-spy-Kyle.html</h1>

<textarea id="myArea01" rows="4" cols="70">Hello how are you</textarea><br>

<!-- Encrypt Button -->
<input type="button" value="Encrypt" onclick="encrypt()"><br><br>

<textarea id="myArea02" rows="4" cols="70"></textarea><br>

<!-- Decrypt Button -->
<input type="button" value="Decrypt" onclick="decrypt()"><br><br>

<textarea id="myArea03" rows="4" cols="70"></textarea><br>

<input type="hidden" id="spaceIndices" value=""> 

<script>
function encrypt() {
  let text = document.getElementById('myArea01').value;
  let spaceIndices = [];
  let spaceCounter = 0;

  // Encrypt the text
  let encryptedText = text.split('').map((char, index) => {
    if (char === ' ') {
      spaceIndices.push(index);
      return String.fromCharCode((spaceCounter++ % 26) + 97); // Replace space with a letter
    } else if (/[a-z]/.test(char)) {
      return String.fromCharCode(((char.charCodeAt(0) - 97 - 1 + 26) % 26) + 97); // Shift lowercase
    } else if (/[A-Z]/.test(char)) {
      return String.fromCharCode(((char.charCodeAt(0) - 65 - 1 + 26) % 26) + 65); // Shift uppercase
    } else if (/\d/.test(char)) {
      return String.fromCharCode(((char.charCodeAt(0) - 48 - 1 + 10) % 10) + 48); // Shift number
    }
    return char; // Return unchanged if not a space, letter, or number
  }).join('');

  // Store the space indices for decryption
  document.getElementById('spaceIndices').value = spaceIndices.join(',');

  // Show encrypted text
  document.getElementById('myArea02').value = encryptedText;
}

function decrypt() {
  let text = document.getElementById('myArea02').value;
  let spaceIndices = document.getElementById('spaceIndices').value.split(',');
  
  // Decrypt the text
  let decryptedText = text.split('').map((char, index) => {
    if (/[a-z]/.test(char)) {
      return String.fromCharCode(((char.charCodeAt(0) - 97 + 1) % 26) + 97); // Shift lowercase
    } else if (/[A-Z]/.test(char)) {
      return String.fromCharCode(((char.charCodeAt(0) - 65 + 1) % 26) + 65); // Shift uppercase
    } else if (/\d/.test(char)) {
      return String.fromCharCode(((char.charCodeAt(0) - 48 + 1) % 10) + 48); // Shift number
    }
    return char; // Return unchanged if not a letter or number
  });

  // Restore spaces
  spaceIndices.forEach(index => {
    decryptedText[index] = ' ';
  });

  // Show decrypted text
  document.getElementById('myArea03').value = decryptedText.join('');
}
</script>

</body>
</html>
