<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store and Retrieve Multiple Values</title>
</head>
<body onload="{
   // Load the stored keys into the select dropdowns
   let storedKeys = Object.keys(localStorage);
   let selectStore = document.getElementById('selectStore');
   let selectRetrieve = document.getElementById('selectRetrieve');
   
   storedKeys.forEach((key, index) => {
      let option = document.createElement('option');
      option.value = key;
      option.textContent = 'Stored Item ' + (index + 1);
      selectStore.appendChild(option);
      selectRetrieve.appendChild(option.cloneNode(true)); // Add same options to both selects
   }

   // Optionally, select the first item by default if any values are stored
   if (storedKeys.length > 0) {
      selectStore.value = storedKeys[0];
      selectRetrieve.value = storedKeys[0];
      loadStoredValue(selectRetrieve.value);
   }
}">

<h3>Store New Value</h3>
<!-- Input box to enter a new value -->
<input id="myInput" type="text" size="70" placeholder="Enter text to store"><br><br>

<!-- Select dropdown to choose which stored value to save the new text under -->
<select id="selectStore">
   <option value="">Select where to store</option>
</select><br><br>

<!-- Button to store the text in the selected storage -->
<input type="button" value="Store Text" onclick="storeText()"><br><br>

<h3>Retrieve Stored Value</h3>
<!-- Select dropdown to choose which stored value to load into the second text box -->
<select id="selectRetrieve" onchange="loadStoredValue(this.value)">
   <option value="">Select a stored item to retrieve</option>
</select><br><br>

<!-- Text box to display the selected stored value -->
<input id="myOutput" type="text" size="70" readonly><br><br>

<!-- Button to retrieve and display the selected value in the output text box -->
<input type="button" value="Retrieve Text" onclick="retrieveText()">

<script>
// Function to store the text input into the selected storage location
function storeText() {
   let inputText = document.getElementById('myInput').value;
   let selectedKey = document.getElementById('selectStore').value;

   if (selectedKey && inputText) {
      localStorage.setItem(selectedKey, inputText);
      alert('Text has been stored under: ' + selectedKey);

      // Add the new item to the select dropdowns
      let selectStore = document.getElementById('selectStore');
      let selectRetrieve = document.getElementById('selectRetrieve');
      let option = document.createElement('option');
      option.value = selectedKey;
      option.textContent = 'Stored Item ' + (selectStore.options.length);

      selectStore.appendChild(option);
      selectRetrieve.appendChild(option.cloneNode(true)); // Add to both selects

      // Optionally clear the input box after storing
      document.getElementById('myInput').value = '';
   } else {
      alert('Please enter some text and select where to store it.');
   }
}

// Function to retrieve the selected text from localStorage
function loadStoredValue(key) {
   if (key) {
      let storedValue = localStorage.getItem(key);
      document.getElementById('myOutput').value = storedValue || 'No value stored.';
   } else {
      document.getElementById('myOutput').value = '';
   }
}

// Function to retrieve and display the selected stored value in the second text box
function retrieveText() {
   let selectedKey = document.getElementById('selectRetrieve').value;
   if (selectedKey) {
      loadStoredValue(selectedKey);
   } else {
      alert('Please select an item to retrieve.');
   }
}
</script>

</body>
</html>
