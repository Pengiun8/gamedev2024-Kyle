<!DOCTYPE html>
<html>
<head>
    <title>t2a19-move-background-kyle</title>
    <script>
        let myGlobalX = 0; // Background X position
        let myGlobalY = 0; // Background Y position
        let myClock01;
        let isMoving = false; // Track if any automatic movement is active
        const keysPressed = new Set(); // Track pressed keys
        const imgWidth = 100; // Width of the image
        const imgHeight = 80;  // Height of the image

        function moveImage(direction) {
            let img = document.getElementById('myImage01');
            let step = 10;
            let left = parseInt(img.style.left, 10) || 0;
            let top = parseInt(img.style.top, 10) || 0;

            // Calculate new position based on direction
            let newLeft = left;
            let newTop = top;

            switch (direction) {
                case 'right':
                    newLeft = left + step;
                    myGlobalX -= step; // Move background left
                    break;
                case 'left':
                    newLeft = left - step;
                    myGlobalX += step; // Move background right
                    break;
                case 'up':
                    newTop = top - step;
                    myGlobalY += step; // Move background down
                    break;
                case 'down':
                    newTop = top + step;
                    myGlobalY -= step; // Move background up
                    break;
            }

            // Get viewport dimensions
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;

            // Check boundaries
            if (newLeft >= 0 && newLeft <= viewportWidth - imgWidth) {
                img.style.left = newLeft + 'px';
            }
            if (newTop >= 0 && newTop <= viewportHeight - imgHeight) {
                img.style.top = newTop + 'px';
            }

            updateBackgroundPosition();
        }

        function updateBackgroundPosition() {
            document.getElementById('myBody').style.backgroundPosition = myGlobalX + 'px ' + myGlobalY + 'px';
        }

        function autoMove(direction) {
            if (isMoving) return; // Prevent multiple intervals
            isMoving = true;
            clearInterval(myClock01);
            myClock01 = setInterval(function() {
                moveImage(direction);
            }, 100);
        }

        function stopMove() {
            clearInterval(myClock01);
            isMoving = false; // Reset the moving state
        }

        function updateMovement() {
            if (keysPressed.has('w')) moveImage('up');
            if (keysPressed.has('s')) moveImage('down');
            if (keysPressed.has('a')) moveImage('left');
            if (keysPressed.has('d')) moveImage('right');
        }

        document.addEventListener('keydown', function(event) {
            keysPressed.add(event.key);
            updateMovement();
        });

        document.addEventListener('keyup', function(event) {
            keysPressed.delete(event.key);
        });

        document.addEventListener('keydown', function(event) {
            switch (event.key) {
                case ' ':
                    stopMove();
                    break;
            }
        });

        // Center the character on page load
        window.onload = function() {
            const img = document.getElementById('myImage01');
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            const initialLeft = (viewportWidth - imgWidth) / 2;
            const initialTop = (viewportHeight - imgHeight) / 2;
            img.style.left = initialLeft + 'px';
            img.style.top = initialTop + 'px';
        };
    </script>
</head>
<body id="myBody" style="background-image: url('https://wallpaperset.com/w/full/a/4/6/179798.jpg'); background-repeat: repeat; background-size: cover;">
    <h1 align="center">t2a19-move-background-kyle.html</h1>

    <h2 align="center">Image Movement Controls</h2>
    <table border="1" align="center">
        <tr>
            <td></td>
            <td><input type="button" value="Up (W)" onclick="moveImage('up')"></td>
            <td></td>
        </tr>
        <tr>
            <td><input type="button" value="Left (A)" onclick="moveImage('left')"></td>
            <td></td>
            <td><input type="button" value="Right (D)" onclick="moveImage('right')"></td>
        </tr>
        <tr>
            <td></td>
            <td><input type="button" value="Down (S)" onclick="moveImage('down')"></td>
            <td></td>
        </tr>
    </table>

    <h2 align="center">Background Movement Controls</h2>
    <table border="1" align="center">
        <tr>
            <td><input type="button" value="Auto Move Left" onclick="autoMove('left')"></td>
            <td><input type="button" value="Stop (Space)" onclick="stopMove()"></td>
        </tr>
    </table>

    <img id="myImage01" style="position:relative; width:100px; height:80px; top:0px; left:0px;" src="https://www.pngkey.com/png/full/443-4430054_terraria-guide-png-clipart-terraria-minecraft-non-player.png">
</body>
</html>
