<body id="myBody" style="background-repeat:repeat; background-size: 80%" background="myBackground01.jpg">

<h1 align="center">t2a23-Game-Template-by-Kyle</h1>
<br><br><br><br>

<!-- Movement Control Table -->
<table border="1" align="center">
    <tr>
        <td></td>
        <td><input type="button" value="Up (W)" onclick="moveImage('up')"></td>
        <td></td>
    </tr>
    <tr>
        <td><input type="button" value="Left (A)" onclick="moveImage('left')"></td>
        <td></td>
        <td><input type="button" value="Right (D)" onclick="moveImage('right')"></td>
    </tr>
    <tr>
        <td></td>
        <td><input type="button" value="Down (S)" onclick="moveImage('down')"></td>
        <td></td>
    </tr>
</table>

<h1 align="center">Auto Move</h1>

<!-- Auto Move Control Table -->
<table border="1" align="center">
    <tr>
        <td></td>
        <td><input type="button" value="Auto Up (Shift + W)" onclick="autoMove('up')"></td>
        <td></td>
    </tr>
    <tr>
        <td><input type="button" value="Auto Left (Shift + A)" onclick="autoMove('left')"></td>
        <td><input type="button" value="Stop (Space)" onclick="stopMove()"></td>
        <td><input type="button" value="Auto Right (Shift + D)" onclick="autoMove('right')"></td>
    </tr>
    <tr>
        <td></td>
        <td><input type="button" value="Auto Down (Shift + S)" onclick="autoMove('down')"></td>
        <td></td>
    </tr>
</table>
<br><br>

<script>
   // global variables here
   let myGlobalX = 0;
   let myClock;
   let myClock02;

   // global functions here
   function myHitOther(my1, my2) {
       let left1 = parseInt(document.getElementById(my1).style.left);
       let right1 = left1 + parseInt(document.getElementById(my1).style.width);
       let top1 = parseInt(document.getElementById(my1).style.top);
       let bottom1 = top1 + parseInt(document.getElementById(my1).style.height);

       let left2 = parseInt(document.getElementById(my2).style.left);
       let right2 = left2 + parseInt(document.getElementById(my2).style.width);
       let top2 = parseInt(document.getElementById(my2).style.top);
       let bottom2 = top2 + parseInt(document.getElementById(my2).style.height);

       // Return true if a collision is detected
       if ((right1 >= left2) && (bottom1 >= top2) && (left1 <= right2) && (top1 <= bottom2)) {
           return true;
       }
       return false;
   }

   function myCheckHit() {
       if (myHitOther('myImg01', 'myImg02')) {
           alert('You lose 2');
           document.getElementById('myImg01').style.left = '20px';
           location = 'https://pengiun8.github.io/gamedev2024-Kyle/public/t2a23-Game-Template-by-Kyle.html';
       }
       if (myHitOther('myImg01', 'myImg03')) {
           alert('You lose 3');
           document.getElementById('myImg01').style.left = '20px';
       }
       if (myHitOther('myImg01', 'myImg04')) {
           alert('You lose 4');
           document.getElementById('myImg01').style.left = '20px';
       }
       if (myHitOther('myImg01', 'myImg05')) {
           alert('You lose 5');
           document.getElementById('myImg01').style.left = '20px';
       }
   }

   // Function to move image and update positions of following images
   function moveImage(direction) {
       let img = document.getElementById('myImg01');
       let step = 3;  // Smaller step size for smoother movement
       let left = parseInt(img.style.left, 10) || 0;
       let top = parseInt(img.style.top, 10) || 0;

       // Move the image in the given direction
       switch (direction) {
           case 'right':
               img.style.left = (left + step) + 'px';
               break;
           case 'left':
               img.style.left = (left - step) + 'px';
               break;
           case 'up':
               img.style.top = (top - step) + 'px';
               break;
           case 'down':
               img.style.top = (top + step) + 'px';
               break;
       }

       // After moving, check for collisions
       myCheckHit();

       // Update positions of all following images to smoothly follow myImg01 at constant speeds
       updateFollowImages();
   }

   // Function to make myImg02, myImg03, myImg04, and myImg05 smoothly follow myImg01 at a constant speed
   function updateFollowImages() {
       let img1 = document.getElementById('myImg01');
       let img2 = document.getElementById('myImg02');
       let img3 = document.getElementById('myImg03');
       let img4 = document.getElementById('myImg04');
       let img5 = document.getElementById('myImg05');

       // Get current positions of images
       let left1 = parseInt(img1.style.left, 10);
       let top1 = parseInt(img1.style.top, 10);

       // Define different speeds for each image
       let speed2 = 3;  // myImg02 will move faster
       let speed3 = 2;  // myImg03 will move slower
       let speed4 = 1;  // myImg04 will move slower
       let speed5 = 0.5;  // myImg05 will move slowest

       // Move each image towards myImg01 at different speeds
       moveToward(img2, left1, top1, speed2);
       moveToward(img3, left1, top1, speed3);
       moveToward(img4, left1, top1, speed4);
       moveToward(img5, left1, top1, speed5);
   }

   // Function to move an image toward a target position (left1, top1) with a constant speed
   function moveToward(img, targetLeft, targetTop, speed) {
       let left = parseInt(img.style.left, 10);
       let top = parseInt(img.style.top, 10);

       // Calculate direction vector
       let dx = targetLeft - left;
       let dy = targetTop - top;
       let distance = Math.sqrt(dx * dx + dy * dy);  // Distance to target

       // Normalize direction vector and move by a fixed speed
       if (distance > 0) {
           dx /= distance;  // Normalize x distance
           dy /= distance;  // Normalize y distance
           img.style.left = (left + dx * speed) + 'px';
           img.style.top = (top + dy * speed) + 'px';
       }
   }

   function autoMove(direction) {
       clearInterval(myClock02);
       let intervalTime = 10;  // More frequent updates for smoother movement
       myClock02 = setInterval(function() {
           moveImage(direction);
       }, intervalTime);  // Faster interval for smoother movement
   }

   function stopMove() {
       clearInterval(myClock02);
   }

   // Keyboard controls for manual movement
   document.addEventListener('keydown', function(event) {
       switch (event.key) {
           case 'w':
               moveImage('up');
               break;
           case 'a':
               moveImage('left');
               break;
           case 's':
               moveImage('down');
               break;
           case 'd':
               moveImage('right');
               break;
           case 'W':
               autoMove('up');
               break;
           case 'A':
               autoMove('left');
               break;
           case 'S':
               autoMove('down');
               break;
           case 'D':
               autoMove('right');
               break;
           case ' ':
               stopMove();
               break;
       }
   });

   // Auto Background and Movement Controls
   document.getElementById('myBody').style.backgroundRepeat = 'repeat';
   document.getElementById('myBody').style.backgroundSize = '80%';

</script>

<!-- Images -->
<img id="myImg01" style="position:absolute; width:100px; height:80px; top:400px; left:900px;"  src="https://th.bing.com/th/id/OIP.kbI7mjIliY65HX_iVkaCPwHaHa?rs=1&pid=ImgDetMain">
<img id="myImg02" style="position:absolute; width:100px; height:80px; top:100px; left:100px;" src="https://files.123freevectors.com/wp-content/solidbackground/traditional-royal-blue-free-solidcolor-background.jpg">
<img id="myImg03" style="position:absolute; width:100px; height:80px; top:700px; left:1700px;" src="https://wallpapers.com/images/hd/yellow-square-1000-x-1000-wallpaper-012q36x57zmvf259.jpg">
<img id="myImg04" style="position:absolute; width:100px; height:80px; top:100px; left:1700px;" src="https://cdn.suwalls.com/wallpapers/abstract/purple-squares-43497-2560x1600.jpg">
<img id="myImg05" style="position:absolute; width:100px; height:80px; top:700px; left:100px;" src="https://pngimg.com/uploads/square/square_PNG11.png">

<!-- Auto Background and Movement Controls -->
<input type="button" value="Auto Background Left" onclick="{
    clearInterval(myClock)
    let myTemp = '100px 0px'
    myClock = setInterval(function(){
        myGlobalX -= 5
        myTemp =  myGlobalX + 'px 0px'
        document.getElementById('myBody').style.backgroundPosition = myTemp
    }, 10)
}">

<input type="button" value="Image Right Fast Button" onTouchStart="{this.click(); event.preventDefault();}" onclick="{
    document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) + 10 + 'px'
    myCheckHit()  // checks for all collisions
}">
</body>
</html>
